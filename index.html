<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MGS - Treinamento Motores El√©tricos e MCA</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Georgia&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #000;
            color: #fff;
            line-height: 1.7;
            padding: 10px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #111;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
            position: relative;
        }
        .header {
            background: #000;
            padding: 30px 20px;
            text-align: center;
            border-bottom: 6px solid #FFD700;
            position: relative;
        }
        .logo-svg {
            width: 180px;
            height: auto;
            margin: 0 auto;
            display: block;
        }
        .title {
            margin-top: 20px;
            font-size: 1.8rem;
            color: #FFD700;
            font-weight: bold;
        }
        .menu-toggle {
            display: none;
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(#FFD700, #DAA520);
            border: none;
            color: #000;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            font-size: 1.8rem;
            cursor: pointer;
            z-index: 1001;
            justify-content: center;
            align-items: center;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }
        .menu-toggle:hover { transform: scale(1.1); box-shadow: 0 10px 30px rgba(255, 215, 0, 0.9); }
        .drawer {
            position: fixed;
            top: 0;
            left: -300px;
            width: 280px;
            height: 100%;
            background: #000;
            border-right: 4px solid #FFD700;
            padding: 100px 20px 40px;
            transition: left 0.4s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        .drawer.open { left: 0; }
        .drawer button {
            display: block;
            width: 100%;
            background: #1a1a1a;
            color: #fff;
            border: 2px solid #FFD700;
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .drawer button:hover { background: #FFD700; color: #000; transform: translateX(5px); }
        .overlay-mobile {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 999;
        }
        .overlay-mobile.active { display: block; }
        .nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            padding: 20px 15px;
            background: #000;
        }
        .nav button {
            background: #1a1a1a;
            color: #fff;
            border: 2px solid #FFD700;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 0.95rem;
            min-width: 140px;
            flex: 1 1 140px;
            max-width: 200px;
        }
        .nav button:hover {
            background: #FFD700;
            color: #000;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 215, 0, 0.5);
        }
        .section { display: none; padding: 25px; animation: fadeIn 0.6s; }
        .section.active { display: block; }
        h3 { color: #FFD700; font-size: 1.7rem; margin: 25px 0 15px; border-bottom: 2px solid #333; padding-bottom: 8px; }
        h4 { color: #FFD700; margin: 16px 0 10px; font-size: 1.3rem; }
        p, li { margin-bottom: 14px; font-size: 1.05rem; text-align: justify; }
        .highlight { background: #FFD700; color: #000; padding: 3px 8px; border-radius: 5px; font-weight: bold; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: #1a1a1a;
            font-size: 0.9rem;
            overflow-x: auto;
            display: block;
            white-space: nowrap;
        }
        th, td { border: 1px solid #FFD700; padding: 10px; text-align: center; }
        th { background: #FFD700; color: #000; font-weight: bold; }
        .alert { background: #1a1a1a; padding: 18px; margin: 20px 0; border-radius: 10px; border: 1px solid #FFD700; }
        .steps { background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 10px 0; list-style: none; }
        .steps li { padding: 8px; border-left: 4px solid #FFD700; margin: 6px 0; }
        .simulator { background: #1a1a1a; padding: 25px; border-radius: 15px; border: 2px solid #FFD700; margin: 20px 0; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #FFD700; }
        select, input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #FFD700; background: #000; color: #fff; font-size: 1rem; }
        .phase-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .result-block { margin-top: 20px; padding: 18px; border-radius: 10px; font-size: 1.2rem; text-align: center; font-weight: bold; }
        .verde { background: #003300; color: #00ff00; border: 2px solid #00ff00; }
        .amarelo { background: #333300; color: #ffff00; border: 2px solid #ffff00; }
        .vermelho { background: #330000; color: #ff6666; border: 2px solid #ff0000; }
        .warning-ccm { background: #330000; color: #ff6666; padding: 15px; border-radius: 10px; margin-top: 15px; font-weight: bold; border: 2px solid #ff0000; }
        .recomendacao { background: #333300; color: #ffff00; padding: 15px; border-radius: 10px; margin-top: 15px; font-weight: bold; border: 2px solid #ffff00; }
        button.analyze { background: #FFD700; color: #000; padding: 14px 30px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; margin-top: 20px; width: 100%; }

        #quiz-container { display: none; background: #111; padding: 30px; border-radius: 15px; border: 3px solid #FFD700; margin: 30px; }
        .quiz-header { text-align: center; margin-bottom: 25px; }
        .progress-bar { height: 12px; background: #333; border-radius: 6px; overflow: hidden; margin: 15px 0; }
        #progress-fill { height: 100%; background: #FFD700; width: 0; transition: width 0.5s ease; }
        .question { font-size: 1.3rem; color: #FFD700; margin-bottom: 20px; font-weight: bold; }
        .tip { background: #FFD700; color: #000; padding: 10px; border-radius: 5px; margin: 12px 0; font-style: italic; font-size: 0.95rem; }
        .options { display: grid; gap: 12px; }
        .option { background: #1a1a1a; padding: 14px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s; font-size: 1rem; }
        .option:hover { border-color: #FFD700; transform: scale(1.02); }
        .option.correct { background: #003300; border-color: #00ff00; color: #00ff00; }
        .option.incorrect { background: #330000; border-color: #ff0000; color: #ff6666; }
        .quiz-controls { text-align: center; margin-top: 30px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .quiz-controls button { background: #FFD700; color: #000; border: none; padding: 12px 24px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1rem; }

        #certificate {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            overflow-y: auto;
            padding: 10px 0;
        }
        #certificate-content {
            max-width: 900px;
            width: 95%;
            margin: 20px auto;
            background: linear-gradient(to bottom, #fafafa, #ffffff);
            color: #000;
            padding: 35px 25px;
            border: 10px solid transparent;
            border-image: linear-gradient(to right, #FFD700, #DAA520) 1;
            border-radius: 15px;
            box-shadow: 0 0 40px rgba(255,215,0,0.6);
            font-family: 'Georgia', serif;
            text-align: center;
            line-height: 1.4;
            position: relative;
        }
        #certificate .logo-cert { width: 120px; margin-bottom: 15px; }
        #certificate h1 { font-family: 'Playfair Display', serif; font-size: 2.3rem; color: #DAA520; margin: 12px 0; letter-spacing: 2px; }
        #certificate .subtitle { font-size: 1.15rem; color: #555; margin: 8px 0 15px; font-style: italic; }
        #certificate .certify-text { font-size: 1.25rem; margin: 12px 0 8px; }
        #certificate .participant { font-size: 2rem; color: #000; margin: 18px 0; font-weight: bold; border-bottom: 3px solid #FFD700; display: inline-block; padding: 0 30px 6px; }
        #certificate .course-title { font-size: 1.4rem; color: #333; margin: 18px 0; font-weight: bold; line-height: 1.3; }
        #certificate .score { font-size: 1.55rem; color: #DAA520; margin: 18px 0; background: rgba(255,215,0,0.1); padding: 7px 20px; border-radius: 8px; display: inline-block; }
        #certificate .date { font-size: 1.1rem; color: #555; margin: 18px 0; }
        #certificate .seal { position: absolute; bottom: 30px; right: 25px; width: 85px; height: 85px; background: radial-gradient(circle, #FFD700, #DAA520); border-radius: 50%; border: 4px solid #fff; box-shadow: 0 0 20px rgba(0,0,0,0.4); text-align: center; line-height: 85px; color: #fff; font-weight: bold; font-size: 0.85rem; transform: rotate(-10deg); }
        #certificate .signature-container { display: flex; flex-direction: column; gap: 12px; margin-top: 25px; padding-top: 12px; border-top: 1px solid #ccc; }
        #certificate .signature { text-align: center; }
        #certificate .signature-line { width: 70%; height: 2px; background: #000; margin: 8px auto 4px; }
        #certificate .signature-name { font-size: 1.1rem; font-weight: bold; }
        #certificate .signature-role { font-size: 0.85rem; color: #666; font-style: italic; }
        #certificate .footer-note { margin-top: 20px; font-size: 0.78rem; color: #777; font-style: italic; }
        #certificate .btn-container { margin-top: 25px; display: flex; flex-direction: column; gap: 10px; align-items: center; }
        #certificate .pdf-btn, #certificate .print-btn {
            background: linear-gradient(#FFD700, #DAA520);
            color: #000;
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.05rem;
            cursor: pointer;
            width: 80%;
            max-width: 260px;
        }
        #certificate .back-btn {
            background: #555;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .menu-toggle { display: flex; }
            .nav { display: none; }
            .header { padding-top: 80px; }
            .title { font-size: 1.5rem; }
            .logo-svg { width: 140px; }
            .section { padding: 20px 15px; }
            #certificate-content { padding: 25px 15px; font-size: 0.9rem; line-height: 1.38; }
            #certificate h1 { font-size: 2.1rem; }
            #certificate .participant { font-size: 1.8rem; }
            #certificate .course-title { font-size: 1.3rem; }
            #certificate .score { font-size: 1.4rem; }
        }

        @media (max-width: 480px) {
            .title { font-size: 1.3rem; }
            .logo-svg { width: 120px; }
            #certificate-content { padding: 20px 12px; font-size: 0.86rem; }
            #certificate h1 { font-size: 1.9rem; }
            #certificate .participant { font-size: 1.65rem; }
        }

        /* Impress√£o - cabe em 1 p√°gina A4 */
        @media print {
            body {
                background: #ffffff !important;
                color: #000000 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                margin: 0;
            }
            .container > *:not(#certificate), #certificate .btn-container, .header, .nav, .menu-toggle, .drawer, .overlay-mobile, .overlay, #quiz-container {
                display: none !important;
            }
            #certificate {
                display: block !important;
                position: static !important;
                background: #ffffff !important;
                width: 100% !important;
                height: auto !important;
                padding: 0 !important;
                overflow: visible !important;
            }
            #certificate-content {
                box-shadow: none !important;
                border: 8px solid #FFD700 !important;
                border-image: none !important;
                margin: 0 !important;
                padding: 25px 18px !important;
                width: 210mm !important;
                max-width: 210mm !important;
                background: #ffffff !important;
                color: #000000 !important;
                font-size: 11pt !important;
                line-height: 1.35 !important;
                page-break-inside: avoid;
                page-break-after: avoid;
                height: auto !important;
            }
            #certificate h1 { font-size: 22pt !important; margin: 8px 0 !important; }
            #certificate .subtitle { font-size: 11pt !important; margin: 6px 0 12px !important; }
            #certificate .participant { font-size: 18pt !important; margin: 12px 0 !important; padding-bottom: 4px !important; }
            #certificate .course-title { font-size: 13pt !important; margin: 12px 0 !important; }
            #certificate .score { font-size: 14pt !important; margin: 12px 0 !important; padding: 5px 15px !important; }
            #certificate .date { font-size: 10pt !important; margin: 12px 0 !important; }
            #certificate .seal { width: 70px !important; height: 70px !important; line-height: 70px !important; bottom: 15px !important; right: 15px !important; font-size: 9pt !important; }
            #certificate .signature-container { gap: 10px !important; margin-top: 15px !important; padding-top: 10px !important; }
            #certificate .signature-line { margin: 6px auto 3px !important; }
            #certificate .signature-name { font-size: 10pt !important; }
            #certificate .signature-role { font-size: 8pt !important; }
            #certificate .footer-note { margin-top: 15px !important; font-size: 7.5pt !important; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <svg class="logo-svg" viewBox="0 0 220 90" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 45 L35 20 L60 45 L48 45 L48 70 L36 70 L36 45 Z" fill="#FFD700"/>
                <text x="70" y="55" font-family="Arial Black" font-size="52" fill="#FFD700" font-weight="bold">MGS</text>
                <text x="70" y="75" font-family="Arial" font-size="22" fill="#aaa" font-weight="bold">TRAINING</text>
            </svg>
            <h2 class="title">Conceitos de Motores El√©tricos e Identifica√ß√£o de Falhas por MCA</h2>
        </header>
        <div class="menu-toggle" onclick="toggleDrawer()">‚ò∞</div>
        <div class="drawer" id="drawer">
            <button onclick="openSectionAndClose('intro')">Introdu√ß√£o</button>
            <button onclick="openSectionAndClose('predictive')">Manuten√ß√£o Preditiva</button>
            <button onclick="openSectionAndClose('basics')">Conceitos</button>
            <button onclick="openSectionAndClose('ac')">Motores AC</button>
            <button onclick="openSectionAndClose('dc')">Motores CC</button>
            <button onclick="openSectionAndClose('failures')">Falhas El√©tricas</button>
            <button onclick="openSectionAndClose('tests')">Testes</button>
            <button onclick="openSectionAndClose('mca-tests')">Ensaios MCA</button>
            <button onclick="openSectionAndClose('mca')">MCA Geral</button>
            <button onclick="openSectionAndClose('ieee')">Normas IEEE</button>
            <button onclick="startQuizAndClose()">Quiz Divertido üéÆ</button>
            <button onclick="openSectionAndClose('simulator')">Simulador MCA ‚öôÔ∏è</button>
        </div>
        <div class="overlay-mobile" id="overlay-mobile" onclick="toggleDrawer()"></div>
        <nav class="nav">
            <button onclick="openSection('intro')">Introdu√ß√£o</button>
            <button onclick="openSection('predictive')">Manuten√ß√£o Preditiva</button>
            <button onclick="openSection('basics')">Conceitos</button>
            <button onclick="openSection('ac')">Motores AC</button>
            <button onclick="openSection('dc')">Motores CC</button>
            <button onclick="openSection('failures')">Falhas El√©tricas</button>
            <button onclick="openSection('tests')">Testes</button>
            <button onclick="openSection('mca-tests')">Ensaios MCA</button>
            <button onclick="openSection('mca')">MCA Geral</button>
            <button onclick="openSection('ieee')">Normas IEEE</button>
            <button onclick="startQuiz()">Quiz Divertido üéÆ</button>
            <button onclick="openSection('simulator')">Simulador MCA ‚öôÔ∏è</button>
        </nav>
        <main id="content">
            <section id="intro" class="section active">
                <h3>INTRODU√á√ÉO</h3>
                <p>Os <span class="highlight">motores el√©tricos</span> consomem <strong>40%</strong> da energia no Brasil. Na ind√∫stria, at√© <strong>80%</strong>.</p>
                <p>Um programa de <span class="highlight">manuten√ß√£o preditiva</span> reduz consumo em <strong>10% a 14%</strong> e evita paradas.</p>
                <div class="alert">
                    <h4>PRINCIPAIS CAUSAS DE INTERRUP√á√ÉO NA PRODU√á√ÉO</h4>
                    <table>
                        <tr><th>Causa</th><th>% de Paradas</th></tr>
                        <tr><td><strong>Falhas El√©tricas</strong></td><td><strong>45%</strong></td></tr>
                        <tr><td>Falhas Mec√¢nicas</td><td>30%</td></tr>
                        <tr><td>Falta de Mat√©ria-Prima</td><td>15%</td></tr>
                        <tr><td>Outros</td><td>10%</td></tr>
                    </table>
                    <p><strong>Falhas el√©tricas s√£o a #1 causa</strong> de paradas n√£o planejadas.</p>
                </div>
            </section>
            <section id="predictive" class="section">
                <h3>MANUTEN√á√ÉO PREDITIVA</h3>
                <p>A <span class="highlight">manuten√ß√£o preditiva</span> usa dados para prever falhas antes que ocorram.</p>
                <h4>Benef√≠cios</h4>
                <ul>
                    <li>Redu√ß√£o de <strong>70%</strong> em paradas n√£o planejadas</li>
                    <li>Aumento de <strong>25%</strong> na vida √∫til do motor</li>
                    <li>Economia de <strong>8-12%</strong> em energia</li>
                </ul>
                <h4>T√©cnicas Preditivas</h4>
                <table>
                    <tr><th>T√©cnica</th><th>Detecta</th></tr>
                    <tr><td><strong>MCA</strong></td><td>Falhas el√©tricas (curto, aterramento)</td></tr>
                    <tr><td>An√°lise de Vibra√ß√£o</td><td>Rolamentos, desbalanceamento</td></tr>
                    <tr><td>Termografia</td><td>Sobreaquecimento</td></tr>
                    <tr><td>An√°lise de √ìleo</td><td>Desgaste mec√¢nico</td></tr>
                </table>
                <p><strong>MCA √© a mais eficaz para falhas el√©tricas.</strong></p>
            </section>
            <section id="basics" class="section">
                <h3>CONCEITOS B√ÅSICOS</h3>
                <ul>
                    <li><strong>Corrente (I):</strong> Fluxo de el√©trons ‚Üí <span class="highlight">Amp√©re (A)</span></li>
                    <li><strong>Tens√£o (V):</strong> Diferen√ßa de potencial ‚Üí <span class="highlight">Volts (V)</span></li>
                    <li><strong>Resist√™ncia (R):</strong> Oposi√ß√£o ‚Üí <span class="highlight">Ohms (Œ©)</span></li>
                    <li><strong>Indut√¢ncia (L):</strong> Campo magn√©tico ‚Üí <span class="highlight">Henry (H)</span></li>
                    <li><strong>√Çngulo de Fase:</strong> Diferen√ßa entre ondas ‚Üí <span class="highlight">0¬∞ a 90¬∞</span></li>
                </ul>
                <h4>Convers√£o de Pot√™ncia</h4>
                <table>
                    <tr><th>De</th><th>√ó</th><th>Para</th></tr>
                    <tr><td>CV</td><td>0,736</td><td>kW</td></tr>
                    <tr><td>HP</td><td>0,746</td><td>kW</td></tr>
                    <tr><td>kW</td><td>1,341</td><td>HP</td></tr>
                    <tr><td>5 CV</td><td>‚Äî</td><td>3,68 kW</td></tr>
                </table>
            </section>
            <section id="ac" class="section">
                <h3>MOTORES AC - TIPOS E FUNCIONAMENTO</h3>
                <p>Motores de Corrente Alternada (AC) s√£o os mais comuns na ind√∫stria, operando com corrente que alterna dire√ß√£o. Funcionam por indu√ß√£o eletromagn√©tica, sem contato direto com escovas.</p>
                <h4>Tipos Principais</h4>
                <table>
                    <tr><th>Tipo</th><th>Princ√≠pio</th><th>Aplica√ß√µes</th><th>Exemplo</th><th>Vantagens</th></tr>
                    <tr><td><strong>Indu√ß√£o de Gaiola de Esquilo</strong></td><td>Rotor com barras de alum√≠nio/cobre induzidas pelo estator</td><td>Bombas, ventiladores, esteiras</td><td>WEG 10 CV, 380V, 4 p√≥los (1750 RPM)</td><td>Robusto, barato, baixa manuten√ß√£o</td></tr>
                    <tr><td><strong>Indu√ß√£o com Rotor Bobinado</strong></td><td>Rotor com enrolamentos conectados a an√©is coletores</td><td>Guindastes, moinhos (controle de partida)</td><td>ABB 50 kW, 6600V</td><td>Alta partida de torque, velocidade vari√°vel</td></tr>
                    <tr><td><strong>S√≠ncrono</strong></td><td>Rotor gira sincronizado com campo magn√©tico do estator</td><td>Compressores, geradores, altas pot√™ncias</td><td>Siemens 500 kW, 6.6kV, 1500 RPM</td><td>Alta efici√™ncia, fator de pot√™ncia corrig√≠vel</td></tr>
                    <tr><td><strong>Monof√°sico</strong></td><td>Uma fase, com capacitor para partida</td><td>Ferramentas dom√©sticas, pequenos equipamentos</td><td>Trapp 1 CV, 220V</td><td>Simples para baixa pot√™ncia</td></tr>
                </table>
                <p><strong>Dica:</strong> Velocidade s√≠ncrona = (120 √ó f) / p (f = frequ√™ncia, p = p√≥los). Ex: 60Hz, 4 p√≥los = 1800 RPM.</p>
            </section>
            <section id="dc" class="section">
                <h3>MOTORES CC - TIPOS E FUNCIONAMENTO</h3>
                <p>Motores de Corrente Cont√≠nua (CC) oferecem controle preciso de velocidade via tens√£o/armadura. Usam escovas e comutador para inverter corrente no rotor.</p>
                <h4>Tipos Principais</h4>
                <table>
                    <tr><th>Tipo</th><th>Princ√≠pio</th><th>Aplica√ß√µes</th><th>Exemplo</th><th>Vantagens</th></tr>
                    <tr><td><strong>S√©rie</strong></td><td>Campo e armadura em s√©rie: alto torque em baixa velocidade</td><td>Guindastes, tra√ß√£o el√©trica, partida de motores</td><td>Baldor 5 HP, 180V, alto torque</td><td>Excelente para cargas vari√°veis</td></tr>
                    <tr><td><strong>Shunt (Deriva√ß√£o)</strong></td><td>Campo paralelo √† armadura: velocidade constante</td><td>M√°quinas-ferramenta, laminadoras</td><td>Leeson 3 kW, 220V, 1750 RPM</td><td>Est√°vel sob carga</td></tr>
                    <tr><td><strong>Composto</strong></td><td>S√©rie + shunt: equil√≠brio torque/velocidade</td><td>Prensas, elevadores</td><td>US Motors 10 HP, composto cumulativo</td><td>Vers√°til para ind√∫stria pesada</td></tr>
                    <tr><td><strong>Brushless (Sem Escovas)</strong></td><td>Eletr√¥nicos controlam comuta√ß√£o: sem desgaste mec√¢nico</td><td>Drones, CNC, ve√≠culos el√©tricos</td><td>Maxon EC 45, 24V, alta precis√£o</td><td>Alta efici√™ncia, longa vida √∫til</td></tr>
                </table>
                <p><strong>Dica:</strong> Velocidade ‚âà (V - Ia √ó Ra) / k √ó Œ¶ (V=tens√£o, Ra=resist√™ncia armadura, Œ¶=campo).</p>
                <h4>Compara√ß√£o AC vs CC</h4>
                <table>
                    <tr><th>Aspecto</th><th>AC</th><th>CC</th></tr>
                    <tr><td>Custo</td><td>Baixo</td><td>Alto</td></tr>
                    <tr><td>Manuten√ß√£o</td><td>Baixa (sem escovas)</td><td>Alta (escovas desgastam)</td></tr>
                    <tr><td>Controle Velocidade</td><td>Precisa VFD</td><td>Nativo via tens√£o</td></tr>
                    <tr><td>Efici√™ncia</td><td>Alta em cargas constantes</td><td>Alta em vari√°veis</td></tr>
                </table>
            </section>
            <section id="failures" class="section">
                <h3>FALHAS EL√âTRICAS COMUNS</h3>
                <table>
                    <tr><th>Falha</th><th>Causa</th><th>Sintoma</th><th>Impacto</th></tr>
                    <tr><td><strong>Curto entre espiras</strong></td><td>Sobrecarga</td><td>Corrente alta</td><td>Queima do enrolamento</td></tr>
                    <tr><td><strong>Aterramento</strong></td><td>Umidade</td><td>Disjuntor desarma</td><td>Parada total</td></tr>
                    <tr><td><strong>Desbalanceamento</strong></td><td>Conex√£o solta</td><td>Vibra√ß√£o</td><td>Sobreaquecimento</td></tr>
                    <tr><td><strong>Barras quebradas</strong></td><td>Vibra√ß√£o</td><td>Ru√≠do</td><td>Perda de torque</td></tr>
                    <tr><td><strong>Isolamento fraco</strong></td><td>Envelhecimento</td><td>Fa√≠scas</td><td>Curto-circuito</td></tr>
                    <tr><td><strong>Curto fase-fase</strong></td><td>Defeito de fabrica√ß√£o</td><td>Fuma√ßa</td><td>Motor queimado</td></tr>
                </table>
                <p><strong>45% das falhas s√£o el√©tricas.</strong></p>
            </section>
            <section id="tests" class="section">
                <h3>TESTES TRADICIONAIS</h3>
                <table>
                    <tr><th>Teste</th><th>Detecta</th></tr>
                    <tr><td>Meg√¥hmetro</td><td>Isolamento</td></tr>
                    <tr><td>Surge Test</td><td>Curto entre espiras</td></tr>
                </table>
            </section>
            <section id="mca-tests" class="section">
                <h3>ENSAIOS DE TESTE MCA - DETALHES PR√ÅTICOS</h3>
                <p>O MCA (An√°lise de Circuito do Motor) √© um teste desenergizado (motor desligado) que aplica sinais AC de baixa voltagem (sinusoidais) para medir a resposta do circuito el√©trico (RCL: Resist√™ncia, Capacit√¢ncia, Indut√¢ncia). Dura <strong>menos de 3 minutos</strong> por motor e detecta falhas precoces sem desmontar. Baseado em apostilas t√©cnicas, os ensaios principais incluem:</p>
                <h4>Passos Gerais para Realizar o Ensaio MCA</h4>
                <ul class="steps">
                    <li><strong>Prepara√ß√£o:</strong> Desligue o motor e isole. Conecte o equipamento MCA (ex: ALL-TEST Pro) nos terminais de fase (U, V, W) e terra.</li>
                    <li><strong>Aquisi√ß√£o de Baseline:</strong> Me√ßa valores iniciais (TVS - Test Value Static) para refer√™ncia futura.</li>
                    <li><strong>Testes Sequenciais:</strong> Aplique sinais de 50-400 Hz e registre respostas.</li>
                    <li><strong>An√°lise:</strong> Compare com limites (desbalanceamento >2-5% indica falha). Monitore tend√™ncias ao longo do tempo.</li>
                    <li><strong>Relat√≥rio:</strong> Gere gr√°fico de TVS para rastrear degrada√ß√£o.</li>
                </ul>
                <h4>Par√¢metros e Limites dos Ensaios</h4>
                <table>
                    <tr><th>Ensaio/Par√¢metro</th><th>O que Mede</th><th>Normal</th><th>Falha Indica</th><th>Como Detecta</th></tr>
                    <tr><td><strong>Resist√™ncia (R)</strong></td><td>Resist√™ncia DC das bobinas</td><td>Desbalanceamento ‚â§2%</td><td>Conex√£o solta ou curto</td><td>Sinal DC baixo; varia√ß√£o >3% = deteriora√ß√£o</td></tr>
                    <tr><td><strong>Indut√¢ncia (L)</strong></td><td>Circuito indutivo (bobinas)</td><td>Desbalanceamento ‚â§5%; I/F 15-50</td><td>Curto entre espiras ou rotor defeituoso</td><td>Sinal AC vari√°vel; compara fases</td></tr>
                    <tr><td><strong>Imped√¢ncia (Z)</strong></td><td>Resist√™ncia complexa (R + L + C)</td><td>Est√°vel por fase</td><td>Desbalanceamento geral</td><td>Sinais sinusoidais; inclui cabos</td></tr>
                    <tr><td><strong>√Çngulo de Fase (Fi)</strong></td><td>Fator de qualidade do isolamento</td><td>70-90¬∞</td><td>Contamina√ß√£o ou umidade</td><td><70¬∞ = curto; mede capacit√¢ncia</td></tr>
                    <tr><td><strong>Capacit√¢ncia (C)</strong></td><td>Capacit√¢ncia para terra</td><td>Trend√°vel (influenciada por umidade)</td><td>Isolamento fraco</td><td>Compara com baseline; varia com ambiente</td></tr>
                    <tr><td><strong>Teste de Isolamento (MegOhms)</strong></td><td>Resist√™ncia ao terra</td><td>>100 MŒ©</td><td>Aterramento</td><td>Alta voltagem integrada; detecta umidade</td></tr>
                    <tr><td><strong>TVS (Test Value Static)</strong></td><td>Assinatura est√°tica do motor</td><td>Consistente (independente de rotor)</td><td>Mudan√ßa em enrolamentos/rotor</td><td>Compara baseline; patenteado para tend√™ncias</td></tr>
                </table>
                <div class="alert">
                    <p><strong>Exemplo Pr√°tico:</strong> Em um motor de 10 CV, se desbalanceamento de L >5%, indica curto entre espiras precoce ‚Äî planeje rebobinamento antes da falha total. Varia√ß√£o >3% no TVS = inspecione cabos/conex√µes.</p>
                    <p><strong>Vantagens:</strong> N√£o destrutivo, testa cabos e MCC, ROI r√°pido (evita paradas de 45% das falhas).</p>
                </div>
            </section>
            <section id="mca" class="section">
                <h3>MCA - AN√ÅLISE DE CIRCUITO</h3>
                <p>O MCA mede <span class="highlight">R, L, Z, Fi</span> sem desmontar o motor, usando equipamentos como o ALL-TEST Pro. Abaixo, explica√ß√£o completa de todos os par√¢metros medidos pelo ALL-TEST Pro.</p>
                <h4>Par√¢metros Detalhados do ALL-TEST Pro</h4>
                <table>
                    <tr><th>Par√¢metro</th><th>Descri√ß√£o</th><th>O que Detecta</th><th>Valores Normais</th><th>Falha T√≠pica</th></tr>
                    <tr><td><strong>Resist√™ncia (R)</strong></td><td>Medi√ß√£o DC precisa das bobinas com Kelvin clips (at√© 1 mŒ©).</td><td>Conex√µes soltas, curtos ou desbalanceamentos em fases.</td><td>Desbalanceamento ‚â§2%; varia√ß√£o <3% da baseline.</td><td>>2% desbalanceamento: conex√£o ruim ou curto fase-fase.</td></tr>
                    <tr><td><strong>Imped√¢ncia (Z)</strong></td><td>Resist√™ncia AC complexa (inclui R, L e C) em sinais sinusoidais.</td><td>Desbalanceamentos gerais no circuito, incluindo cabos e MCC.</td><td>Est√°vel entre fases; -49% a -38% em motores de indu√ß√£o.</td><td>Desbalanceamento >1%: falha em enrolamentos ou rotor.</td></tr>
                    <tr><td><strong>Indut√¢ncia (L)</strong></td><td>Resposta indutiva das bobinas a sinais AC vari√°veis.</td><td>Curtos entre espiras, rotor defeituoso ou desbalanceamento.</td><td>Desbalanceamento ‚â§5%; I/F 15-50.</td><td>>5% desbalanceamento: curto ou barras quebradas no rotor.</td></tr>
                    <tr><td><strong>√Çngulo de Fase (Fi)</strong></td><td>Fator de qualidade (Q) do isolamento, n√£o o PF do motor.</td><td>Contamina√ß√£o, umidade ou curtos no isolamento.</td><td>70-90¬∞ (bom isolamento).</td><td><70¬∞: curto ou contamina√ß√£o; >90¬∞: perda de indut√¢ncia.</td></tr>
                    <tr><td><strong>Resposta Corrente/Frequ√™ncia (I/F)</strong></td><td>Resposta de corrente em frequ√™ncias vari√°veis (50-400 Hz).</td><td>Curtos turn-to-turn, coil-to-coil ou phase-to-phase precoces.</td><td>15-50 (consistente com baseline).</td><td>Varia√ß√£o >10%: falha em desenvolvimento no enrolamento.</td></tr>
                    <tr><td><strong>Capacit√¢ncia (C)</strong></td><td>Capacit√¢ncia do circuito √† terra (em mF, ¬µF ou pF).</td><td>Isolamento fraco ou contamina√ß√£o ambiental.</td><td>Trend√°vel; influenciada por temperatura/umidade.</td><td>Aumento s√∫bito: umidade ou degrada√ß√£o do isolamento.</td></tr>
                    <tr><td><strong>Resist√™ncia de Isolamento √† Terra (IR/MegOhms)</strong></td><td>Resist√™ncia DC √† terra para groundwall.</td><td>Aterramentos ou fraquezas no isolamento √† terra.</td><td>>100 MŒ© (seguro).</td><td><100 MŒ©: risco de falha de seguran√ßa; a√ß√£o imediata.</td></tr>
                    <tr><td><strong>Test Value Static (TVS)</strong></td><td>Valor patenteado calculado de testes est√°ticos em 3 fases (algoritmo propriet√°rio).</td><td>Mudan√ßas em estator/rotor, independentemente da posi√ß√£o do rotor.</td><td>Consistente com baseline (de f√°brica ou inicial).</td><td>Mudan√ßa >3%: deteriora√ß√£o em enrolamentos, rotor ou cabos.</td></tr>
                    <tr><td><strong>Assinaturas Din√¢micas de Estator e Rotor (para AC <1000V)</strong></td><td>An√°lise de assinaturas din√¢micas para estator e rotor squirrel-cage.</td><td>Falhas no rotor (bar/anel) ou estator.</td><td>'OK' ou 'Warn'; balanceado.</td><td>'Bad': rotor danificado ou desbalanceamento grave.</td></tr>
                </table>
                <div class="alert">
                    <p><strong>Como Funciona no ALL-TEST Pro:</strong> O dispositivo injeta sinais AC/DC de baixa voltagem (<9V) nos terminais (U,V,W e terra), medindo respostas em <3 min. Use o software MCA para trendear dados e gerar relat√≥rios. TVS √© o "impress√£o digital" do motor ‚Äî compare baselines para prever falhas.</p>
                    <p><strong>Dica:</strong> Teste no MCC ou diretamente no motor; desbalanceamentos >2-5% indicam a√ß√£o imediata.</p>
                </div>
            </section>
            <section id="ieee" class="section">
                <h3>NORMAS IEEE PARA MCA E TESTES DE MOTORES</h3>
                <p>As normas IEEE (Institute of Electrical and Electronics Engineers) padronizam testes de motores el√©tricos, garantindo seguran√ßa, precis√£o e manuten√ß√£o preditiva. Elas s√£o cruciais para MCA, validando medi√ß√µes como IR, Hipot e an√°lise de circuitos. O processo de desenvolvimento IEEE √© rigoroso (anos de revis√£o por experts). Abaixo, as principais normas aplic√°veis a MCA:</p>
                <h4>Normas Principais e Aplica√ß√µes</h4>
                <table>
                    <tr><th>Norma IEEE</th><th>Descri√ß√£o</th><th>Aplica√ß√£o em MCA</th><th>Benef√≠cios</th></tr>
                    <tr><td><strong>IEEE 43</strong></td><td>Resist√™ncia de Isolamento e √çndice de Polariza√ß√£o (IR/PI).</td><td>Medi√ß√£o de IR √† terra; temperatura corrigida a 40¬∞C.</td><td>Detecta umidade/contamina√ß√£o precoce; PI >2 indica bom isolamento.</td></tr>
                    <tr><td><strong>IEEE 56</strong></td><td>Teste de Manuten√ß√£o Hipot AC.</td><td>Testes de alta voltagem AC para isolamento (n√£o destrutivo em MCA).</td><td>Valida groundwall; evita falhas de 45% em paradas el√©tricas.</td></tr>
                    <tr><td><strong>IEEE 95</strong></td><td>Teste Hipot DC (Step Voltage).</td><td>Aumento gradual de voltagem DC; plota corrente para n√£o-linearidades.</td><td>Identifica fraquezas no isolamento; essencial para trend em MCA.</td></tr>
                    <tr><td><strong>IEEE 112</strong></td><td>Procedimentos de Teste para Motores/Geradores de Indu√ß√£o Polif√°sicos.</td><td>Testes de desempenho, incluindo imped√¢ncia e resposta de frequ√™ncia.</td><td>Base para medi√ß√µes Z, L e I/F no ALL-TEST Pro; avalia efici√™ncia.</td></tr>
                    <tr><td><strong>IEEE 3002.7</strong></td><td>Pr√°ticas Recomendadas para Estudos de Partida de Motores em Sistemas Industriais/Comerciais.</td><td>An√°lise de corrente de partida, quedas de tens√£o e impactos no sistema.</td><td>Integra MCA para prever falhas em partida; inclui dados de requisitos e simula√ß√µes.</td></tr>
                    <tr><td><strong>IEEE 400-2001</strong></td><td>Guia para Testes de Campo em Sistemas de Cabos Blindados.</td><td>Testes de isolamento em cabos conectados a motores.</td><td>Complementa MCA testando cabos/MCC; detecta falhas em conex√µes.</td></tr>
                </table>
                <div class="alert">
                    <p><strong>Por Que Usar IEEE em MCA?</strong> Essas normas garantem testes padronizados, reduzindo downtime (at√© 70% com preditiva) e riscos de seguran√ßa. Ex: Em MCA, use IEEE 43 para corrigir IR por temperatura. Refer√™ncias: IEEE Electrical Insulation Conference (2003) e IEEE Press Series on Power Engineering (2004).</p>
                    <p><strong>Dica:</strong> Consulte o IEEE Xplore para atualiza√ß√µes; integre com software MCA para relat√≥rios conformes.</p>
                </div>
            </section>
            <section id="simulator" class="section">
                <h3>SIMULADOR MCA - AN√ÅLISE DE ISOLAMENTO E CONTAMINA√á√ÉO</h3>
                <p>Responda para cada teste se foi realizado. O local do ensaio √© importante para a an√°lise correta.</p>
                <div class="simulator">
                    <div class="form-group">
                        <label><strong>Onde o ensaio foi realizado?</strong></label>
                        <select id="local-teste">
                            <option value="motor">Diretamente na caixa de liga√ß√£o do motor</option>
                            <option value="ccm">No CCM (Centro de Controle de Motores)</option>
                        </select>
                        <small style="color:#ffff00;">Essa informa√ß√£o √© usada em todas as an√°lises e recomenda√ß√µes.</small>
                    </div>
                    <div class="form-group">
                        <label><strong>Qual a temperatura do motor durante o ensaio (¬∞C)?</strong></label>
                        <input type="number" id="temperatura-motor" placeholder="Ex: 25" step="0.1">
                        <small style="color:#ffff00;">Usado para corrigir valores de isolamento para 40¬∞C (IEEE 43).</small>
                    </div>
                    <div class="form-group">
                        <label>O ensaio de Resist√™ncia de Isolamento foi realizado?</label>
                        <select id="ensaio-isolamento" onchange="toggleIsolamentoDetails()">
                            <option value="nao">N√£o</option>
                            <option value="sim">Sim</option>
                        </select>
                    </div>
                    <div id="isolamento-details" style="display:none;">
                        <div class="form-group">
                            <label>Tens√£o nominal do motor:</label>
                            <select id="tensao-motor">
                                <option value="220">220V</option>
                                <option value="380">380V / 440V</option>
                                <option value="600">600V / 690V</option>
                                <option value="2300">2,3 kV</option>
                                <option value="4160">4,16 kV</option>
                                <option value="6600">6,6 kV</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Valores de Resist√™ncia de Isolamento (MŒ©):</label>
                            <div class="phase-inputs">
                                <input type="number" id="ir-fase1" placeholder="Fase 1" step="0.1">
                                <input type="number" id="ir-fase2" placeholder="Fase 2" step="0.1">
                                <input type="number" id="ir-fase3" placeholder="Fase 3" step="0.1">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>O ensaio de contamina√ß√£o (Fator de Dissipa√ß√£o) foi realizado?</label>
                        <select id="ensaio-contaminacao" onchange="toggleFdField()">
                            <option value="nao">N√£o</option>
                            <option value="sim">Sim</option>
                        </select>
                    </div>
                    <div id="fd-field" style="display:none;">
                        <div class="form-group">
                            <label>Fator de Dissipa√ß√£o (Contamina√ß√£o) (%):</label>
                            <input type="number" id="fd-percent" placeholder="Ex: 5.8" step="0.01">
                            <small>Verde < 5,99% | Amarelo 6,00‚Äì6,99% | Vermelho ‚â• 7,00%</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Foi realizado teste de isolamento no cabo?</label>
                        <select id="teste-cabo" onchange="toggleCaboFields()">
                            <option value="nao">N√£o</option>
                            <option value="sim">Sim</option>
                        </select>
                    </div>
                    <div id="cabo-fields" style="display:none;">
                        <div class="form-group">
                            <label>Valores de Isolamento do Cabo (MŒ©):</label>
                            <div class="phase-inputs">
                                <input type="number" id="cabo-fase1" placeholder="Fase 1" step="0.1">
                                <input type="number" id="cabo-fase2" placeholder="Fase 2" step="0.1">
                                <input type="number" id="cabo-fase3" placeholder="Fase 3" step="0.1">
                            </div>
                        </div>
                    </div>
                    <button class="analyze" onclick="analisarTudo()">Analisar Tudo ‚ö°</button>
                    <div id="resultado-isolamento" class="result-block" style="display:none;"></div>
                    <div id="resultado-contaminacao" class="result-block" style="display:none;"></div>
                    <div id="recomendacao-contaminacao" style="display:none;"></div>
                    <div id="resultado-cabo" class="result-block" style="display:none;"></div>
                    <div id="aviso-ccm" style="display:none;"></div>
                </div>
            </section>
        </main>
        <div id="quiz-container">
            <div class="quiz-header">
                <h3>Quiz Divertido: Ensaios MCA üöÄ</h3>
                <div class="progress-bar"><div id="progress-fill"></div></div>
                <p id="progress-text">Pergunta 1 de 22</p>
                <p id="score">Acertos: 0%</p>
                <p id="timer"></p>
            </div>
            <div id="question-container"></div>
            <div class="quiz-controls">
                <button id="next-btn">Pr√≥xima! ‚û°Ô∏è</button>
                <button onclick="backToHome()">Voltar ao In√≠cio</button>
            </div>
        </div>
        <div id="overlay" class="overlay" onclick="backToHome()"></div>
        <div id="certificate">
            <div id="certificate-content">
                <svg class="logo-cert" viewBox="0 0 220 90" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 45 L35 20 L60 45 L48 45 L48 70 L36 70 L36 45 Z" fill="#FFD700"/>
                    <text x="70" y="55" font-family="Arial Black" font-size="52" fill="#FFD700" font-weight="bold">MGS</text>
                    <text x="70" y="75" font-family="Arial" font-size="22" fill="#aaa" font-weight="bold">TRAINING</text>
                </svg>
                <h1>CERTIFICADO DE CONCLUS√ÉO</h1>
                <p class="subtitle">Programa de Capacita√ß√£o T√©cnica em Manuten√ß√£o Preditiva</p>
                <p class="certify-text">Concedido a</p>
                <div class="participant" id="cert-name">[Seu Nome]</div>
                <p class="certify-text">por concluir com √™xito o treinamento</p>
                <p class="course-title">
                    Conceitos de Motores El√©tricos e Identifica√ß√£o de Falhas por MCA<br>
                    (Motor Circuit Analysis)
                </p>
                <div class="score" id="cert-score">0/22 (0%)</div>
                <p class="date">Emitido em: <span id="cert-date"></span></p>
                <div class="seal">APROVADO</div>
                <div class="signature-container">
                    <div class="signature">
                        <div class="signature-line"></div>
                        <p class="signature-name">Equipe MGS Training</p>
                        <p class="signature-role">Instrutor Respons√°vel</p>
                    </div>
                    <div class="signature">
                        <div class="signature-line"></div>
                        <p class="signature-name">Diretoria T√©cnica MGS</p>
                        <p class="signature-role">Certifica√ß√£o Oficial</p>
                    </div>
                </div>
                <p class="footer-note">
                    Este certificado comprova profici√™ncia em an√°lise de circuito de motores el√©tricos (MCA), conforme normas IEEE e pr√°ticas internacionais de manuten√ß√£o preditiva. V√°lido por 2 anos a partir da data de emiss√£o.
                </p>
                <div class="btn-container">
                    <button class="pdf-btn" onclick="saveAsPDF()">üìÑ Salvar como PDF</button>
                    <button class="print-btn" onclick="printCertificate()">üñ®Ô∏è Imprimir Certificado</button>
                    <button class="back-btn" onclick="backToHome()">Voltar ao In√≠cio</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [
            { q: "Qual o nome do ensaio que √© necess√°rio girar o eixo do motor em velocidade constante?", o: ["Ensaio din√¢mico", "Teste de resist√™ncia", "Teste de isolamento", "Rotor"], c: 0, tip: "√â o √∫nico que precisa do rotor girando!" },
            { q: "Qual o nome do ensaio que verifica o FD (Fator de Dissipa√ß√£o)?", o: ["Ensaio din√¢mico", "Teste de isolamento", "Teste de contamina√ß√£o", "Estator"], c: 2, tip: "FD √© relacionado ao ensaio de contamina√ß√£o!" },
            { q: "Qual o ensaio necess√°rio para verificar se o isolamento dos cabos est√° ruim?", o: ["Resist√™ncia", "Isolamento", "Contamina√ß√£o", "√Çngulo de fase"], c: 1, tip: "Pensa no que mede resist√™ncia √† terra!" },
            { q: "O que √© extremamente importante no ensaio de MCA?", o: ["Verificar e confiar no primeiro ensaio realizado", "Realizar o ensaio no m√°ximo 3 vezes e ignorar varia√ß√µes", "Fazer o ensaio v√°rias vezes e certificar que h√° repetibilidade nos resultados", "S√≥ testar uma fase"], c: 2, tip: "Repetibilidade √© a chave da confiabilidade!" },
            { q: "O que significa indut√¢ncia?", o: ["√â a capacidade de armazenar energia no campo magn√©tico", "√â o campo eletromagn√©tico", "√â a oposi√ß√£o √† corrente cont√≠nua", "√â a capacit√¢ncia do enrolamento"], c: 0, tip: "Lembra da bobina e do campo magn√©tico!" },
            { q: "O que significa Reat√¢ncia indutiva?", o: ["Oposi√ß√£o √† passagem de corrente alternada devido ao campo magn√©tico", "Oposi√ß√£o √† corrente cont√≠nua", "Armazenamento de energia el√©trica", "Resist√™ncia √¥hmica pura"], c: 0, tip: "√â a parte imagin√°ria da imped√¢ncia!" },
            { q: "No ensaio est√°tico, o que o FD alto indica?", o: ["Isolamento perfeito", "Contamina√ß√£o ou umidade no enrolamento", "Curto entre espiras", "Conex√£o solta"], c: 1, tip: "FD mede perdas diel√©tricas!" },
            { q: "Por que o ensaio din√¢mico precisa girar o eixo?", o: ["Para induzir corrente no rotor e avaliar sua influ√™ncia", "Para alinhar as bobinas", "Para medir resist√™ncia DC", "Para testar o isolamento √† terra"], c: 0, tip: "O rotor em movimento muda a assinatura!" },
            { q: "No MCA, por que repetimos o teste v√°rias vezes?", o: ["Para confirmar que os resultados s√£o consistentes e confi√°veis", "Porque o equipamento esquenta", "Para desgastar o isolamento", "S√≥ para preencher relat√≥rio"], c: 0, tip: "Sem repetibilidade, n√£o confiamos!" },
            { q: "No ensaio din√¢mico do ALL-TEST Pro, o que acontece com a indut√¢ncia quando h√° barras quebradas no rotor?", o: ["A indut√¢ncia fica mais balanceada", "Aparece desbalanceamento significativo na indut√¢ncia", "A indut√¢ncia aumenta em todas as fases", "N√£o afeta a indut√¢ncia"], c: 1, tip: "Rotor danificado altera a resposta indutiva!" },
            { q: "Em caso de contamina√ß√£o, qual par√¢metro √© mais sens√≠vel no ensaio est√°tico?", o: ["Resist√™ncia DC", "fator de dissipa√ß√£o", "Imped√¢ncia", "I/F"], c: 1, tip: "Aumenta a contamina√ß√£o!" },
            { q: "Qual a vantagem do ensaio din√¢mico em rela√ß√£o ao est√°tico para falhas no rotor?", o: ["O din√¢mico detecta defeitos no rotor que o est√°tico n√£o v√™ claramente", "O est√°tico √© mais preciso para rotor", "N√£o h√° vantagem", "Din√¢mico s√≥ serve para estator"], c: 0, tip: "Rotor em movimento revela tudo!" },
            { q: "Quando encontramos varia√ß√µes no ensaio de resist√™ncia, o que devemos fazer?", o: ["Verificar se tem sujeira no terminal", "Verificar se a conex√£o est√° bem apertada", "Verificar se a ponta de prova est√° pegando no material condutor do terminal", "Todas acima"], c: 3, tip: "Sempre verifique as conex√µes antes de concluir!" },
            { q: "Quando encontramos varia√ß√£o no ensaio de contamina√ß√£o, o que devemos fazer?", o: ["Verificar se o motor est√° desenergizado", "Verificar se os parafusos de fixa√ß√£o da base est√£o bem fixos", "Verificar o posicionamento do terra, se o parafuso ou conex√£o est√£o bem conectados ou com algo que dificulte a condu√ß√£o", "Nenhuma a√ß√£o necess√°ria"], c: 2, tip: "A conex√£o √† terra √© cr√≠tica nesse ensaio!" },
            { q: "Em um ensaio onde √© encontrado varia√ß√£o em indut√¢ncia, o que devemos fazer?", o: ["Aceitar e diagnosticar como falha logo de cara", "Realizar mais um ensaio para ter certeza", "Mudar a posi√ß√£o do rotor girando o eixo e refazendo o ensaio v√°rias vezes", "Ignorar a varia√ß√£o"], c: 2, tip: "A posi√ß√£o do rotor influencia a indut√¢ncia!" },
            { q: "O que √© IF (Corrente frequ√™ncia)?", o: ["√â a contamina√ß√£o do motor", "√â o isolamento do motor", "√â a rela√ß√£o entre o aumento de corrente e frequ√™ncia no circuito", "√â a resist√™ncia DC"], c: 2, tip: "Mostra como a corrente responde √† frequ√™ncia!" },
            { q: "O que √© reat√¢ncia capacitiva?", o: ["√â a capacidade do circuito de se opor a varia√ß√µes na tens√£o", "√â a capacidade do circuito de se opor a varia√ß√µes na corrente", "√â a resist√™ncia √¥hmica", "√â o campo magn√©tico"], c: 0, tip: "Capacitores op√µem-se a mudan√ßas r√°pidas de tens√£o!" },
            { q: "O que √© reat√¢ncia indutiva?", o: ["√â a capacidade do circuito de se opor a varia√ß√µes na corrente", "√â a capacidade do circuito de se opor a varia√ß√µes na tens√£o", "√â a resist√™ncia DC", "√â a capacit√¢ncia"], c: 0, tip: "Bobinas op√µem-se a mudan√ßas r√°pidas de corrente!" },
            { q: "O que √© imped√¢ncia?", o: ["√â s√≥ o campo eletromagn√©tico", "√â parte do ensaio din√¢mico", "√â o resultado de um c√°lculo de resist√™ncias que existem no circuito (Z = ‚àö(R¬≤ + (XL ‚àí XC)¬≤)", "√â apenas resist√™ncia DC"], c: 2, tip: "Imped√¢ncia √© a resist√™ncia total em AC!" },
            { q: "Caso encontre varia√ß√µes em √¢ngulo de fase, o que devemos fazer?", o: ["Aceitar e diagnosticar como falha logo de cara", "Realizar mais um ensaio para ter certeza", "Mudar a posi√ß√£o do rotor girando o eixo e refazendo o ensaio v√°rias vezes", "Ignorar"], c: 2, tip: "Posi√ß√£o do rotor pode afetar o √¢ngulo de fase!" },
            { q: "O que √© importante saber antes de realizar o ensaio?", o: ["Motivo de terem solicitado o teste", "Entender o ambiente (se o motor est√° exposto a umidade, calor excessivo, chuva ou contaminantes no ar)", "Tens√£o do motor e como √© o fluxo de funcionamento dele", "Todas acima"], c: 3, tip: "Contexto √© essencial para interpretar corretamente!" },
            { q: "Se encontrar varia√ß√µes no CCM, o que devemos fazer?", o: ["Condenamos o motor de acordo com o que foi encontrado", "Voltamos outro dia para novos ensaios", "Realizamos v√°rios ensaios para certificar e condenar o motor", "Sinalizamos para o respons√°vel do equipamento a necessidade de um ensaio diretamente na caixa de liga√ß√£o do motor para certifica√ß√£o da falha"], c: 3, tip: "Primeiro confirme se a falha √© no motor ou no cabo!" }
        ];

        let current = 0, correct = 0, timerInterval = null, userName = "", questions = [];

        function toggleDrawer() {
            document.getElementById('drawer').classList.toggle('open');
            document.getElementById('overlay-mobile').classList.toggle('active');
        }

        function openSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('content').style.display = 'block';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('certificate').style.display = 'none';
        }

        function openSectionAndClose(id) {
            openSection(id);
            toggleDrawer();
        }

        function startQuiz() {
            const name = prompt("Qual seu nome para o certificado?", "T√©cnico MCA");
            if (!name || name.trim() === "") return;
            userName = name.trim();
            questions = allQuestions.sort(() => 0.5 - Math.random());
            document.getElementById('content').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            current = 0;
            correct = 0;
            document.getElementById('next-btn').style.display = 'block';
            loadQuestion();
        }

        function startQuizAndClose() {
            startQuiz();
            toggleDrawer();
        }

        function loadQuestion() {
            clearInterval(timerInterval);
            const q = questions[current];
            document.getElementById('question-container').innerHTML = `
                <div class="question">${q.q}</div>
                <div class="tip">Dica: ${q.tip}</div>
                <div class="options">
                    ${q.o.map((opt, i) => `<div class="option" onclick="selectAnswer(${i})">${opt}</div>`).join('')}
                </div>`;
            document.getElementById('progress-text').textContent = `Pergunta ${current + 1} de ${questions.length}`;
            document.getElementById('progress-fill').style.width = `${((current + 1)/questions.length)*100}%`;
            document.getElementById('next-btn').style.display = 'block';
            document.getElementById('next-btn').disabled = true;
            document.getElementById('timer').textContent = 'Tempo: 30s';
            document.getElementById('timer').style.color = '#FFD700';
            startAnswerTimer();
        }

        function startAnswerTimer() {
            let time = 30;
            timerInterval = setInterval(() => {
                time--;
                document.getElementById('timer').textContent = `Tempo: ${time}s`;
                if (time <= 10) document.getElementById('timer').style.color = '#ff6666';
                if (time <= 0) {
                    clearInterval(timerInterval);
                    timeOutAnswer();
                }
            }, 1000);
        }

        function timeOutAnswer() {
            document.getElementById('timer').textContent = 'Tempo esgotado!';
            const options = document.querySelectorAll('.option');
            const correctIdx = questions[current].c;
            options.forEach((opt, idx) => {
                opt.style.pointerEvents = 'none';
                if (idx === correctIdx) opt.classList.add('correct');
                else opt.classList.add('incorrect');
            });
            document.getElementById('next-btn').disabled = false;
            updateScore();
            startNextTimer();
        }

        function selectAnswer(i) {
            clearInterval(timerInterval);
            const options = document.querySelectorAll('.option');
            const correctIdx = questions[current].c;
            options.forEach((opt, idx) => {
                opt.style.pointerEvents = 'none';
                if (idx === correctIdx) opt.classList.add('correct');
                if (idx === i && i !== correctIdx) opt.classList.add('incorrect');
            });
            if (i === correctIdx) correct++;
            document.getElementById('next-btn').disabled = false;
            updateScore();
            startNextTimer();
        }

        function startNextTimer() {
            let time = 10;
            document.getElementById('timer').textContent = `Tempo para pr√≥xima: ${time}s`;
            document.getElementById('timer').style.color = '#FFD700';
            timerInterval = setInterval(() => {
                time--;
                document.getElementById('timer').textContent = `Tempo para pr√≥xima: ${time}s`;
                if (time <= 5) document.getElementById('timer').style.color = '#ff6666';
                if (time <= 0) {
                    clearInterval(timerInterval);
                    nextQuestion();
                }
            }, 1000);
        }

        function nextQuestion() {
            clearInterval(timerInterval);
            current++;
            if (current < questions.length) {
                loadQuestion();
            } else {
                endQuiz();
            }
        }

        document.getElementById('next-btn').onclick = nextQuestion;

        function updateScore() {
            const perc = Math.round((correct / (current + 1)) * 100);
            document.getElementById('score').textContent = `Acertos: ${perc}%`;
        }

        function endQuiz() {
            clearInterval(timerInterval);
            const perc = Math.round((correct / questions.length) * 100);
            let finalHTML = `<div style="text-align:center;padding:40px;">
                <h3 style="color:#FFD700;">Quiz Finalizado!</h3>
                <p>Voc√™ acertou ${correct} de ${questions.length} (${perc}%)</p>`;
            if (perc >= 60) {
                finalHTML += `<button onclick="showCertificate()" style="background:#FFD700;color:#000;padding:15px 30px;border:none;border-radius:10px;font-weight:bold;cursor:pointer;margin-top:20px;">Gerar Certificado üèÜ</button>`;
            } else {
                finalHTML += `<p style="color:#ff6666;margin-top:20px;">Nota m√≠nima para certificado: 60%<br>Estude mais e tente novamente!</p>`;
            }
            finalHTML += `</div>`;
            document.getElementById('question-container').innerHTML = finalHTML;
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('timer').textContent = '';
        }

        function showCertificate() {
            document.getElementById('cert-name').textContent = userName;
            const perc = Math.round((correct / questions.length) * 100);
            document.getElementById('cert-score').textContent = `${correct}/${questions.length} (${perc}%)`;
            document.getElementById('cert-date').textContent = new Date().toLocaleDateString('pt-BR');
            document.getElementById('certificate').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('next-btn').style.display = 'none';
        }

        function backToHome() {
            clearInterval(timerInterval);
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('certificate').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('next-btn').style.display = 'block';
            openSection('intro');
        }

        function printCertificate() {
            window.print();
        }

        async function saveAsPDF() {
            const { jsPDF } = window.jspdf;
            const element = document.getElementById('certificate-content');
            try {
                const canvas = await html2canvas(element, { scale: 2, useCORS: true, backgroundColor: '#ffffff' });
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgWidth = 190;
                const imgHeight = canvas.height * imgWidth / canvas.width;
                pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                pdf.save(`Certificado_MCA_${userName.replace(/\s+/g, '_')}.pdf`);
            } catch (err) {
                alert("Erro ao gerar PDF. Use o bot√£o de impress√£o.");
            }
        }

        function toggleIsolamentoDetails() {
            document.getElementById('isolamento-details').style.display = document.getElementById('ensaio-isolamento').value === 'sim' ? 'block' : 'none';
        }

        function toggleFdField() {
            document.getElementById('fd-field').style.display = document.getElementById('ensaio-contaminacao').value === 'sim' ? 'block' : 'none';
        }

        function toggleCaboFields() {
            document.getElementById('cabo-fields').style.display = document.getElementById('teste-cabo').value === 'sim' ? 'block' : 'none';
        }

        function corrigirIR(ir, temp) {
            if (ir <= 0) return ir;
            return ir * Math.pow(2, (40 - temp) / 10);
        }

        function analisarTudo() {
            document.getElementById('resultado-isolamento').style.display = 'none';
            document.getElementById('resultado-contaminacao').style.display = 'none';
            document.getElementById('recomendacao-contaminacao').style.display = 'none';
            document.getElementById('resultado-cabo').style.display = 'none';
            document.getElementById('aviso-ccm').style.display = 'none';

            const local = document.getElementById('local-teste').value;
            const temperatura = parseFloat(document.getElementById('temperatura-motor').value) || 40;
            let temDadosPreenchidos = false;
            let problemaIsolamento = false;
            let problemaContaminacao = false;

            const ensaioIsolamento = document.getElementById('ensaio-isolamento').value;
            if (ensaioIsolamento === 'nao') {
                document.getElementById('resultado-isolamento').innerHTML = '<strong>ISOLAMENTO: Ensaio n√£o realizado</strong>';
                document.getElementById('resultado-isolamento').className = 'result-block amarelo';
                document.getElementById('resultado-isolamento').style.display = 'block';
            } else {
                const tensaoMotor = document.getElementById('tensao-motor').value;
                let ir1 = parseFloat(document.getElementById('ir-fase1').value) || 0;
                let ir2 = parseFloat(document.getElementById('ir-fase2').value) || 0;
                let ir3 = parseFloat(document.getElementById('ir-fase3').value) || 0;
                if (ir1 > 0 || ir2 > 0 || ir3 > 0) temDadosPreenchidos = true;

                ir1 = corrigirIR(ir1, temperatura);
                ir2 = corrigirIR(ir2, temperatura);
                ir3 = corrigirIR(ir3, temperatura);
                const menorIR = Math.min(ir1, ir2, ir3);

                const limites = {
                    '220': { verde: 100, amarelo: 20 },
                    '380': { verde: 200, amarelo: 50 },
                    '600': { verde: 300, amarelo: 100 },
                    '2300': { verde: 500, amarelo: 200 },
                    '4160': { verde: 1000, amarelo: 300 },
                    '6600': { verde: 1000, amarelo: 500 }
                };
                const limite = limites[tensaoMotor] || limites['380'];

                let statusIsolamento = '', corIsolamento = '';
                if (menorIR === 0) {
                    statusIsolamento = 'ISOLAMENTO: Valores n√£o informados';
                    corIsolamento = 'amarelo';
                } else if (menorIR > limite.verde) {
                    statusIsolamento = 'ISOLAMENTO: BOM';
                    corIsolamento = 'verde';
                } else if (menorIR > limite.amarelo) {
                    statusIsolamento = 'ISOLAMENTO: EM ATEN√á√ÉO - MONITORAR';
                    corIsolamento = 'amarelo';
                    problemaIsolamento = true;
                } else {
                    statusIsolamento = 'ISOLAMENTO: CR√çTICO - A√á√ÉO IMEDIATA';
                    corIsolamento = 'vermelho';
                    problemaIsolamento = true;
                }

                document.getElementById('resultado-isolamento').innerHTML = `<strong>${statusIsolamento}</strong><br>Menor valor: ${menorIR.toFixed(1)} MŒ©`;
                document.getElementById('resultado-isolamento').className = 'result-block ' + corIsolamento;
                document.getElementById('resultado-isolamento').style.display = 'block';
            }

            const ensaioFd = document.getElementById('ensaio-contaminacao').value;
            if (ensaioFd === 'nao') {
                document.getElementById('resultado-contaminacao').innerHTML = '<strong>CONTAMINA√á√ÉO: Ensaio n√£o realizado</strong>';
                document.getElementById('resultado-contaminacao').className = 'result-block amarelo';
                document.getElementById('resultado-contaminacao').style.display = 'block';
            } else {
                const fd = parseFloat(document.getElementById('fd-percent').value);
                if (!isNaN(fd)) temDadosPreenchidos = true;

                let statusContaminacao = '', corContaminacao = '';
                let recomendacaoHtml = '';
                if (isNaN(fd)) {
                    statusContaminacao = 'CONTAMINA√á√ÉO: Valor n√£o informado';
                    corContaminacao = 'amarelo';
                } else if (fd < 5.99) {
                    statusContaminacao = 'CONTAMINA√á√ÉO: BAIXA (BOM)';
                    corContaminacao = 'verde';
                } else if (fd <= 6.99) {
                    statusContaminacao = 'CONTAMINA√á√ÉO: MODERADA (ATEN√á√ÉO)';
                    corContaminacao = 'amarelo';
                    problemaContaminacao = true;
                    if (local === 'motor') {
                        recomendacaoHtml = '<div class="recomendacao">RECOMENDA√á√ÉO: Verificar a condi√ß√£o dos terminais, conex√µes e aterramento. Limpar se necess√°rio e repetir o ensaio.</div>';
                    }
                } else {
                    statusContaminacao = 'CONTAMINA√á√ÉO: ALTA (CR√çTICO)';
                    corContaminacao = 'vermelho';
                    problemaContaminacao = true;
                    if (local === 'motor') {
                        recomendacaoHtml = '<div class="warning-ccm">CR√çTICO: Poss√≠vel umidade ou contamina√ß√£o no estator. √â necess√°rio enviar o motor para reparo (limpeza/banho/varnish).</div>';
                    }
                }

                document.getElementById('resultado-contaminacao').innerHTML = `<strong>${statusContaminacao}</strong>${!isNaN(fd) ? '<br>Valor FD: ' + fd.toFixed(2) + ' %' : ''}`;
                document.getElementById('resultado-contaminacao').className = 'result-block ' + corContaminacao;
                document.getElementById('resultado-contaminacao').style.display = 'block';
                document.getElementById('recomendacao-contaminacao').innerHTML = recomendacaoHtml;
                document.getElementById('recomendacao-contaminacao').style.display = recomendacaoHtml ? 'block' : 'none';
            }

            const testeCabo = document.getElementById('teste-cabo').value;
            if (testeCabo === 'sim') {
                let c1 = parseFloat(document.getElementById('cabo-fase1').value) || 0;
                let c2 = parseFloat(document.getElementById('cabo-fase2').value) || 0;
                let c3 = parseFloat(document.getElementById('cabo-fase3').value) || 0;
                c1 = corrigirIR(c1, temperatura);
                c2 = corrigirIR(c2, temperatura);
                c3 = corrigirIR(c3, temperatura);
                const menorCabo = Math.min(c1, c2, c3);

                let statusCabo = '', corCabo = '';
                if (menorCabo === 0) {
                    statusCabo = 'ISOLAMENTO DO CABO: Valores n√£o informados';
                    corCabo = 'amarelo';
                } else if (menorCabo > 100) {
                    statusCabo = 'ISOLAMENTO DO CABO: BOM';
                    corCabo = 'verde';
                } else if (menorCabo > 10) {
                    statusCabo = 'ISOLAMENTO DO CABO: EM ATEN√á√ÉO';
                    corCabo = 'amarelo';
                } else {
                    statusCabo = 'ISOLAMENTO DO CABO: CR√çTICO';
                    corCabo = 'vermelho';
                }

                document.getElementById('resultado-cabo').innerHTML = `<strong>${statusCabo}</strong><br>Menor valor: ${menorCabo.toFixed(1)} MŒ©`;
                document.getElementById('resultado-cabo').className = 'result-block ' + corCabo;
                document.getElementById('resultado-cabo').style.display = 'block';
            }

            if (local === 'ccm' && temDadosPreenchidos && (problemaIsolamento || problemaContaminacao)) {
                let problemas = [];
                if (problemaIsolamento) problemas.push("isolamento");
                if (problemaContaminacao) problemas.push("contamina√ß√£o");
                let textoProblemas = problemas.length === 1 ? problemas[0] : problemas.join(" e ");
                let artigo = problemas.length === 1 ? "o" : "os";
                document.getElementById('aviso-ccm').innerHTML = `<div class="warning-ccm">ATEN√á√ÉO: Como o teste foi realizado no CCM e foram encontrados problemas no ${textoProblemas}, √© OBRIGAT√ìRIO repetir ${artigo} ensaio(s) diretamente na caixa de liga√ß√£o do motor para confirma√ß√£o.</div>`;
                document.getElementById('aviso-ccm').style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            openSection('intro');
        });
    </script>
</body>
</html>